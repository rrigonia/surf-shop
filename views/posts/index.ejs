<% layout('layouts/boilerplate') %> 
    <h1>Post Index</h1>
    <div id="cluster-map" style='width: 100%; height: 300px;'></div>
    <%- include ../partials/paginate-post  %>

    <% for(let post of posts.docs) {%>
        <h2><%=post.title%></h2>
        <div><%=post.price %></div>
        <div><%=post.description %></div>
        <div><%=post.location %></div>
        <div><a href="/posts/<%=post._id%>">View More</a></div>
        <% }; %>

    <%- include ../partials/paginate-post  %> 


    <!-- SCRIPTS -->
    
    <script>
        const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
        const posts = {features:<%-JSON.stringify(posts.docs)%>}
    </script>

     <!-- mapbox plugin -->
     <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"></script>
     <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css" type="text/css">
     <!-- mapbox promise -->
     <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>
     <!-- clustermap -->
     <script src="/javascripts/clustermap.js"></script>

    


